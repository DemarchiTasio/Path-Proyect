<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.min.css">
    <script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>
    <title>Lista Informe</title>

</head>

<body>
    <div class="grid-container w-100 mb-5 d-flex justify-content-center">

        <!-- ---------------------------------NavBar------------------------------------------- -->

        <nav class="navbar navbar-dark fixed-top">
            <div class="container-fluid">
                <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas"
                    data-bs-target="#offcanvasDarkNavbar" aria-controls="offcanvasDarkNavbar">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="w-25 offcanvas side-navbar offcanvas-start" tabindex="-1" id="offcanvasDarkNavbar"
                    aria-labelledby="offcanvasDarkNavbarLabel">
                    <div class="offcanvas-header d-flex justify-content-center">
                        <img class="logo-img" src="LogoPath.jpg" alt="">
                        <button type="button" class="btn-close position-absolute top-0 end-0 m-3 btn-close-black"
                            data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>
                    <div class="canvas-body mt-2">
                        <ul class="navbar-nav d-flex justify-content-end flex-grow-1 ms-4">
                            <li class="nav-item">
                                <a class="nav-link text-dark fs-5" aria-current="page" th:href="@{/reports}">
                                    <i class="bx bxs-report"></i>
                                    <span class="link-name">Reports</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link text-dark fs-5" th:href="@{/institutions}">
                                    <i class="bx bxs-school"></i>
                                    <span class="link-name">Institutions</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link text-dark fs-5" th:href="@{/students}">
                                    <i class="bx bxs-graduation"></i>
                                    <span class="link-name">Student</span>
                                </a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link text-dark fs-5 dropdown-toggle" href="#" role="button"
                                    data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="bx bx-book"></i>
                                    <span class="link-name">Exams</span>
                                </a>
                                <ul class="dropdown-menu border-0 ms-3">
                                    <li>
                                        <a class="dropdown-item" th:href="@{/exams}">
                                            <i class='bx bxs-pencil pe-2'></i>
                                            Exam Management
                                        </a>
                                    </li>
                                    <li>
                                        <a class="dropdown-item" th:href="@{/dayOfExams}">
                                            <i class='bx bx-calendar-star pe-2'></i>Day of Exams
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link text-dark fs-5" th:href="@{/certificates}">
                                    <i class='fas fa-award'></i>
                                    <span class="link-name">Certificates</span>
                                </a>
                            </li>
                            <li class="nav-item" sec:authorize="hasRole('ROLE_ADMINISTRADOR')">
                                <a class="nav-link text-dark fs-5" th:href="@{/users}">
                                    <i class='bx bxs-user-detail'></i>
                                    <span class="link-name">Users Management</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link text-dark fs-5" th:href="@{/charts}">
                                    <i class='bx bx-bar-chart-alt'></i>
                                    <span class="link-name">Statistics</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div id="navbar" class="nav-item d-flex align-items-end h-100">
                        <form th:action="@{/logout}" method="post">
                            <a class="nav-link text-dark mb-3 ms-2 fs-5" href="#" onclick="this.parentNode.submit();">
                                <i class='bx bx-exit'></i>
                                    <span class="link-name">Logout</span>
                                </a>
                        </form>
                    </div>
                </div>
        </nav>

        <div class="center container d-flex justify-content-center">
            <div class="row g-4">
                <div class="col">
                <div>
                    <div id="container" style="width: 550px; height: 400px; margin: 0 auto"></div>
                </div>
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
                <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
                <script src="https://code.highcharts.com/highcharts.js"></script>
                <script src="https://code.highcharts.com/modules/exporting.js"></script>
                <script th:inline="javascript">
                    $(function () {
                        Highcharts.chart('container', {
                            chart: {
                                type: 'column'
                            },
                            title: {
                                text: 'Reports vs Institutions'
                            },
                            xAxis: {
                                categories: [[${ reportInst.keySet() }]],
                                crosshair: true
                            },
                            yAxis: {
                                min: 0,
                                max: 50,
                                title: {
                                    text: 'Percentage of institutions [in %]'
                                }
                            },
                            tooltip: {
                                headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                                pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                                    '<td style="padding:0"><b>{point.y:.1f}</b></td></tr>',
                                footerFormat: '</table>',
                                shared: true,
                                useHTML: true
                            },
                            plotOptions: {
                                column: {
                                    pointPadding: 0.2,
                                    borderWidth: 0
                                }
                            },
                            series: [{
                                name: 'Institutions',
                                data: [[${ reportInst.values() }]]
                            }]
                        });
                    });
                </script>
                </div>
                <div class="col d-flex justify-content-center">
                    <script src="https://code.highcharts.com/highcharts.js"></script>
                    <script src="https://code.highcharts.com/highcharts-3d.js"></script>
                    <script src="https://code.highcharts.com/modules/exporting.js"></script>
                
                    <div id="aprovadosInscriptos" style="height: 400px"></div>
                    <script th:inline="javascript">
                        Highcharts.chart('aprovadosInscriptos', {
                            chart : {
                                type : 'pie',
                                options3d : {
                                    enabled : true,
                                    alpha : 50,
                                    beta : 0
                                }
                            },
                            title : {
                                text : 'Students Registered vs Passed'
                            },
                            tooltip : {
                                pointFormat : '{series.name}: <b>{point.percentage:.1f}%</b>'
                            },
                            plotOptions : {
                                pie : {
                                    allowPointSelect : true,
                                    cursor : 'pointer',
                                    depth : 35,
                                    dataLabels : {
                                        enabled : true,
                                        format : '{point.name}'
                                    }
                                }
                            },
                            series : [ {
                                type : 'pie',
                                name : 'Ratio',
                                data : [ [ 'Passed', [[${alumnosAprobados}]] ], [ 'Inscriptions', [[${alumnosInscriptos}]] ]  ]
                            } ]
                        });
                    </script>
                
                </div>
            </div>
            <div class="row g-4">
                <div class="col">
                    <div>
                        <div id="student" style="width: 550px; height: 400px; margin: 0 auto"></div>
                    </div>
                    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
                    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
                    <script src="https://code.highcharts.com/highcharts.js"></script>
                    <script src="https://code.highcharts.com/modules/exporting.js"></script>
                    <script th:inline="javascript">
                        $(function () {
                            Highcharts.chart('student', {
                                chart: {
                                    type: 'column'
                                },
                                title: {
                                    text: 'Students per country'
                                },
                                xAxis: {
                                    categories: [[${ alumnosPais.keySet() }]],
                                    crosshair: true
                                },
                                yAxis: {
                                    min: 0,
                                    max: 100,
                                    title: {
                                        text: 'Technology rating [in %]'
                                    }
                                },
                                tooltip: {
                                    headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                                    pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                                        '<td style="padding:0"><b>{point.y:.1f} K</b></td></tr>',
                                    footerFormat: '</table>',
                                    shared: true,
                                    useHTML: true
                                },
                                plotOptions: {
                                    column: {
                                        pointPadding: 0.2,
                                        borderWidth: 0
                                    }
                                },
                                series: [{
                                    name: 'Students',
                                    data: [[${ alumnosPais.values() }]]
                                }]
                            });
                        });
                    </script>
                </div>
                <div class="col d-flex justify-content-center">
                    <script src="https://code.highcharts.com/highcharts.js"></script>
	<script src="https://code.highcharts.com/highcharts-3d.js"></script>
	<script src="https://code.highcharts.com/modules/exporting.js"></script>

	<div id="inscripcionesAsistencias" style="height: 400px"></div>
	<script th:inline="javascript">
		Highcharts.chart('inscripcionesAsistencias', {
			chart : {
				type : 'pie',
				options3d : {
					enabled : true,
					alpha : 50,
					beta : 0
				}
			},
			title : {
				text : 'Inscriptions vs Attendance'
			},
			tooltip : {
				pointFormat : '{series.name}: <b>{point.percentage:.1f}%</b>'
			},
			plotOptions : {
				pie : {
					allowPointSelect : true,
					cursor : 'pointer',
					depth : 35,
					dataLabels : {
						enabled : true,
						format : '{point.name}'
					}
				}
			},
			series : [ {
				type : 'pie',
				name : 'Ratio',
				data : [ [ 'Total Inscriptions', [[${inscripciones}]] ], [ 'Total Attendance', [[${asistencias}]] ]  ]
			} ]
		});
	</script>
                </div>
            </div>
            
        </div>
        <!-- ---------------------------------Fin Center Container------------------------------------------- -->

    </div>


    <!-- ---------------------------------Script Boostrap------------------------------------------- -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
        crossorigin="anonymous"></script>

    <!-- ---------------------------------Script Tabla------------------------------------------- -->
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#informeTable').DataTable();
        });</script>

    <!-- ---------------------------------Script Validacion de Campos------------------------------------------- -->
    <script>
        // Example starter JavaScript for disabling form submissions if there are invalid fields
        (() => {
            'use strict'

            // Fetch all the forms we want to apply custom Bootstrap validation styles to
            const forms = document.querySelectorAll('.needs-validation')

            // Loop over them and prevent submission
            Array.from(forms).forEach(form => {
                form.addEventListener('submit', event => {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                    }

                    form.classList.add('was-validated')
                }, false)
            })
        })()
    </script>

    <script type="text/javascript" src="script.js"></script>


</body>

</html>